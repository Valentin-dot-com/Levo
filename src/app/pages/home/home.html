 <section class="home-page" >
  <h1 class="greeting">Hi, {{currentUser()?.first_name}}</h1>
  <section class="today-container">
    <h2 class="weekday-label" role="button" tabindex="0" (click)="goToDay(today()!.date)" (keyup.enter)="goToDay(today()!.date)">
      <span class="weekday">
        {{ today()?.weekdayLabel }}
      </span>
      <span class="date">{{ `${today()?.dayNumber} ${thisWeek().monthLabel}, ${thisWeek().year}` }}</span>
    </h2>
    <div class="week-row">
      @for (day of thisWeek().days; let i = $index; track day.dayNumber) {
        <span class="day" [class.today]="day.isToday">
          <p>{{ weekdays[i] }}</p>
          <a [routerLink]="['/day', formatDate(day.date)]">{{ day.dayNumber }}</a>
        </span>
      }
    </div>
    <article class="todays-events">
      <h2>Today's events</h2>
      <ul class="events">
        @if (events().length) {
          @for (event of events(); track event.id) {
            @let eventCalendar = getCalendar(event.calendar_id);
            <li class="list-item">
              <article class="event" tabindex="0" (click)="openEditEvent(event)" (keyup.enter)="openEditEvent(event)">
                <h3>
                  {{ event.title }}
                </h3>
                @if (eventCalendar?.is_shared) {
                  <span class="is-shared-container">
                    <app-icon-shared aria-label="Shared calendar"/>
                  </span>
                }
                @if (event.scheduled_at) {
                  <time class="scheduled-at">{{ formatTime(event.scheduled_at) }}</time>
                }
              </article>
            </li>
          }
        } @else {
          <li class="no-events">
            <h3>You have no events planned for today</h3>
          </li>
        }
      </ul>
    </article>
  </section>
  <section class="boards">
    <h2>Your boards</h2>
    <ul class="boards-list">
      @for (board of boards(); track board.id) {
      @let boardCalendar = getCalendar(board.calendar_id);
      <li class="board">
        <a [routerLink]="['/boards', board.id]">
          <span class="board-calendar">
            {{ boardCalendar?.name }}
            @if (boardCalendar?.is_shared) {
              <span class="is-shared-container">
                <app-icon-shared />
              </span>
            }
          </span>
          <h3 class="board-title">
            {{ board.title }}
          </h3>
        </a>
      </li>
      }
    </ul>
  </section>

  @if (selectedEvent()) {
    <app-edit-event [event]="selectedEvent()" (closed)="closeEdit()" animate.enter="enter-animation" animate.leave="leave-animation"/>
  }
</section>

